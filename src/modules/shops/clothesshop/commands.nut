/**
 * Array with current market
 * @type {Array}
 */
local clothesPrices = [
   /* { skinid = 4 , price = 350, title = "shops.clothesshop.id4"    },  //
    { skinid = 6 , price = 380, title = "shops.clothesshop.id6"    },  //
    { skinid = 10, price = 320, title = "shops.clothesshop.id10"   },  //*/
    { skinid = 48,  price = 350, title = "shops.clothesshop.id48"   },  //
    { skinid = 74,  price = 350, title = "shops.clothesshop.id74"   },  //
    { skinid = 90,  price = 430, title = "shops.clothesshop.id90"   },  //
    { skinid = 93,  price = 450, title = "shops.clothesshop.id93"   },  //
    { skinid = 95,  price = 420, title = "shops.clothesshop.id95"   },  //
    { skinid = 92,  price = 390, title = "shops.clothesshop.id92"   },  //
    { skinid = 89,  price = 370, title = "shops.clothesshop.id89"   },  //
    { skinid = 86,  price = 370, title = "shops.clothesshop.id86"   },  //
    { skinid = 96,  price = 440, title = "shops.clothesshop.id96"   },  //
    { skinid = 117, price = 430, title = "shops.clothesshop.id96"   },  //
];

alternativeTranslate({
    "en|shops.clothesshop.gotothere"     : "If you want to buy clothes go to Vangel's clothing store in Midtown!"
    "en|shops.clothesshop.money.error"   : "Sorry, you don't have enough money."
    "en|shops.clothesshop.selectskin"    : "You can browse clothes and their prices by press E key."
    "en|shops.clothesshop.list.title"    : "Select clothes you like, and proceed to buying via: /skin buy skinID"
    "en|shops.clothesshop.list.entry"    : " - Skin #%d, '%s'. Cost: $%.2f"
    "en|shops.clothesshop.success"       : "Good choice! We look forward to welcoming you in our store!"

    "ru|shops.clothesshop.gotothere"     : "Если вы хотите купить одежду, отправляйтесь в магазин одежды Vangel's в Мидтауне!"
    "ru|shops.clothesshop.money.error"   : "К сожалению, у вас недостаточно денег."
    "ru|shops.clothesshop.selectskin"    : "Вы можете посмотреть одежду и цены на неё, нажав клавишу E."
    "ru|shops.clothesshop.list.title"    : "Выберите одежду, которая вам нравится, и купите её, используя: /skin buy skinID"
    "ru|shops.clothesshop.list.entry"    : " - #%d, %s - $%.2f"
    "ru|shops.clothesshop.success"       : "Отличный выбор! Ждём Вас снова в нашем магазине!"


    "en|shops.clothesshop.id4"        : "Suit with hat"
    "ru|shops.clothesshop.id4"        : "Костюм с шляпой"

    "en|shops.clothesshop.id6"        : "Suit with vest and a hat"
    "ru|shops.clothesshop.id6"        : "Костюм с жилеткой и шляпой"

    "en|shops.clothesshop.id10"       : "Casual clothes"
    "ru|shops.clothesshop.id10"       : "Повседневная одежда"



    "en|shops.clothesshop.id39"        : "Leather jacket with cap"
    "ru|shops.clothesshop.id39"        : "Кожаная куртка с кепкой"

    "en|shops.clothesshop.id40"        : "Leather jacket with hat"
    "ru|shops.clothesshop.id40"        : "Кожаная куртка с шляпой"

    "en|shops.clothesshop.id41"        : "Leather jacket"
    "ru|shops.clothesshop.id41"        : "Кожаная куртка"

    "en|shops.clothesshop.id42"        : "Shirt with jeans and a cap"
    "ru|shops.clothesshop.id42"        : "Рубашка с джинсами и кепкой"

    "en|shops.clothesshop.id43"        : "Checkered shirt with jeans"
    "ru|shops.clothesshop.id43"        : "Клетчатая рубашка с джинсами"

    "en|shops.clothesshop.id44"        : "Shirt"
    "ru|shops.clothesshop.id44"        : "Рубашка"

    "en|shops.clothesshop.id45"        : "Leather jacket with a ear-flap hat and scarf"
    "ru|shops.clothesshop.id45"        : "Кожаная куртка с ушанкой и шарфом"

    "en|shops.clothesshop.id48"        : "Suit for asian man 1"
    "ru|shops.clothesshop.id48"        : "Костюм для китайца 1"

    "en|shops.clothesshop.id49"        : "Suit for asian man 2"
    "ru|shops.clothesshop.id49"        : "Костюм для китайца 2"

    "en|shops.clothesshop.id50"        : "Suit with hat for old chinesse man"
    "ru|shops.clothesshop.id50"        : "Костюм с шляпой для пожилого мужчины"

    "en|shops.clothesshop.id51"        : "Leather jacket with red shirt for asian man"
    "ru|shops.clothesshop.id51"        : "Кожаная куртка с красной рубашкой для китайца"

    "en|shops.clothesshop.id52"        : "Leather jacket for asian man"
    "ru|shops.clothesshop.id52"        : "Кожаная куртка для китайца"

    "en|shops.clothesshop.id54"        : "Suit for asian man 3" /* Jacket with white shirt fot asian man */
    "ru|shops.clothesshop.id54"        : "Костюм для китайца 3" /* Пиджак с белой рубашкой для китайца */

    "en|shops.clothesshop.id71"        : "Light black jacket with jeans"
    "ru|shops.clothesshop.id71"        : "Легкая черная куртка с джинсами"

    "en|shops.clothesshop.id72"        : "Checkered red-white shirt with jeans"
    "ru|shops.clothesshop.id72"        : "Клетчатая красно-белая рубашка с джинсами"

    "en|shops.clothesshop.id74"        : "Suit"
    "ru|shops.clothesshop.id74"        : "Костюм"

    "en|shops.clothesshop.id80"        : "Suit with a hat and butterfly"
    "ru|shops.clothesshop.id80"        : "Костюм с шляпой и бабочкой"

    "en|shops.clothesshop.id81"        : "White shirt with suspenders and a cap 1"
    "ru|shops.clothesshop.id81"        : "Белая рубашка с подтяжками и кепкой 1"

    "en|shops.clothesshop.id83"        : "Leather jacket and a cap for Irish 1"
    "ru|shops.clothesshop.id83"        : "Кожаная куртка и кепка для ирландца 1"

    "en|shops.clothesshop.id84"        : "Leather jacket and a cap for Irish 2"
    "ru|shops.clothesshop.id84"        : "Кожаная куртка и кепка для ирландца 2"

    "en|shops.clothesshop.id85"        : "Suit with tie and a cap for Irish"
    "ru|shops.clothesshop.id85"        : "Костюм с галстуком и кепкой для ирландца"

    "en|shops.clothesshop.id86"        : "Suit with vest for Irish"
    "ru|shops.clothesshop.id86"        : "Костюм с жилеткой для ирландца"

    "en|shops.clothesshop.id88"        : "Gray jacket with cap for Irish"
    "ru|shops.clothesshop.id88"        : "Серая куртка с кепкой для ирландца"

    "en|shops.clothesshop.id89"        : "Gray suit with hat for old man"
    "ru|shops.clothesshop.id89"        : "Серый костюм с шляпой для пожилого мужчины"

    "en|shops.clothesshop.id90"        : "Light coat with hat"
    "ru|shops.clothesshop.id90"        : "Светлое пальто с шляпой"

    "en|shops.clothesshop.id91"        : "Black coat with hat"
    "ru|shops.clothesshop.id91"        : "Чёрный плащ с шляпой"

    "en|shops.clothesshop.id92"        : "Black coat"
    "ru|shops.clothesshop.id92"        : "Чёрное пальто"

    "en|shops.clothesshop.id93"        : "Dark coat with hat"
    "ru|shops.clothesshop.id93"        : "Тёмное пальто с шляпой"

    "en|shops.clothesshop.id95"        : "Gray coat"
    "ru|shops.clothesshop.id95"        : "Серое пальто"

    "en|shops.clothesshop.id96"        : "Suit with gray hat"
    "ru|shops.clothesshop.id96"        : "Костюм с серой шляпой"

    "en|shops.clothesshop.id97"        : "Leather jacket with hat 1"
    "ru|shops.clothesshop.id97"        : "Кожаная куртка с шляпой 1"

    "en|shops.clothesshop.id99"        : "Gray suit with suspenders and a hat"
    "ru|shops.clothesshop.id99"        : "Серый костюм с подтяжками и шляпой"

    "en|shops.clothesshop.id100"       : "Leather jacket with hat 2"
    "ru|shops.clothesshop.id100"       : "Кожаная куртка с шляпой 2"

    "en|shops.clothesshop.id105"       : "Suit with suspenders and a hat 1"
    "ru|shops.clothesshop.id105"       : "Костюм с подтяжками и шляпой 1"

    "en|shops.clothesshop.id106"       : "Black coat with hat and gloves 1"
    "ru|shops.clothesshop.id106"       : "Чёрный плащ с шляпой и перчатками 1"

    "en|shops.clothesshop.id107"       : "Black coat with hat and gloves 2"
    "ru|shops.clothesshop.id107"       : "Кожаная куртка с шляпой и перчатками 2"

    "en|shops.clothesshop.id108"       : "Suit with suspenders and a hat 2"
    "ru|shops.clothesshop.id108"       : "Костюм с подтяжками и шляпой 2"

    "en|shops.clothesshop.id109"       : "Suit with suspenders and a cap for old man"
    "ru|shops.clothesshop.id109"       : "Костюм с подтяжками и кепкой для пожилого мужчины"

    "en|shops.clothesshop.id111"       : "White shirt with green vest"
    "ru|shops.clothesshop.id111"       : "Белая рубашка с зелёной жилеткой"

    "en|shops.clothesshop.id117"       : "Gray coat with hat for old man"
    "ru|shops.clothesshop.id117"       : "Серое пальто с шляпой для пожилого мужчины"

    "en|shops.clothesshop.id123"       : "Leather jacket with jeans 1"
    "ru|shops.clothesshop.id123"       : "Кожаная куртка с джинсами 1"

    "en|shops.clothesshop.id124"       : "Leather jacket with jeans 2"
    "ru|shops.clothesshop.id124"       : "Кожаная куртка с джинсами 2"

    "en|shops.clothesshop.id125"       : "Leather jacket with jeans 3"
    "ru|shops.clothesshop.id125"       : "Кожаная куртка с джинсами 3"

    "en|shops.clothesshop.id126"       : "Leather jacket with jeans and racing glasses"
    "ru|shops.clothesshop.id126"       : "Кожаная куртка с джинсами и гоночными очками"

    "en|shops.clothesshop.id127"       : "Leather jacket with jeans and a cap"
    "ru|shops.clothesshop.id127"       : "Кожаная куртка с джинсами и фуражкой"

    "en|shops.clothesshop.id129"       : "Overalls with cap 1"
    "ru|shops.clothesshop.id129"       : "Рабочий комбинезон с кепкой 1"

    "en|shops.clothesshop.id131"       : "Leather apron with hat"
    "ru|shops.clothesshop.id131"       : "Кожаный фартук с шапкой"

    "en|shops.clothesshop.id132"       : "Gray working jacket with hat"
    "ru|shops.clothesshop.id132"       : "Серый рабочий пиджак с шапкой"

    "en|shops.clothesshop.id133"       : "Leather apron with hat for asian man"
    "ru|shops.clothesshop.id133"       : "Кожаный фартук с кепкой для китайца"

    "en|shops.clothesshop.id134"       : "Overalls with cap 2"
    "ru|shops.clothesshop.id134"       : "Рабочий комбинезон с кепкой 2"

    "en|shops.clothesshop.id149"       : "White shirt with suspenders and a cap 2"
    "ru|shops.clothesshop.id149"       : "Белая рубашка с подтяжками и кепкой 2"

    "en|shops.clothesshop.id153"       : "Fur coat with gloves"
    "ru|shops.clothesshop.id153"       : "Меховое пальто с перчатками"

    "en|shops.clothesshop.id154"       : "Fur coat with ear-flap hat"
    "ru|shops.clothesshop.id154"       : "Меховое пальто с ушанкой"

    "en|shops.clothesshop.id162"       : "Light leather jacket with cap"
    "ru|shops.clothesshop.id162"       : "Светлая кожаная куртка с кепкой"

    "en|shops.clothesshop.id163"       : "Leather jacket with scarf"
    "ru|shops.clothesshop.id163"       : "Кожаная куртка с шарфом"

    "en|shops.clothesshop.id164"       : "Leather jacket for asian man"
    "ru|shops.clothesshop.id164"       : "Кожаная куртка для китайца"

});



key("e", function(playerid) {

    if(!isPlayerInValidPoint(playerid, CLOTHES_SHOP_X, CLOTHES_SHOP_Y, CLOTHES_SHOP_DISTANCE)) {
        //return msg( playerid, "job.docker.letsgo", DOCKER_JOB_COLOR );
        return;
    }

    msg(playerid, "shops.clothesshop.list.title", CL_INFO);

    foreach (idx, skin in clothesPrices) {
        msg(playerid, "shops.clothesshop.list.entry", [skin.skinid, plocalize(playerid, skin.title), skin.price])
    }

    msg(playerid, "shops.clothesshop.list.title", CL_INFO);
});



/**
 * Attempt to by car model
 * Usage: /car buy
 */

cmd("skin", "buy", function(playerid, skinid = null) {
    local skinid = toInteger(skinid);

    if(!isPlayerInValidPoint(playerid, CLOTHES_SHOP_X, CLOTHES_SHOP_Y, CLOTHES_SHOP_DISTANCE)) {
        return msg(playerid, "shops.clothesshop.gotothere", getPlayerName(playerid), CL_THUNDERBIRD);
    }

    if (!skinid || !getSkinBySkinId(skinid)) {
        return msg(playerid, "shops.clothesshop.selectskin");
    }

    if(!players[playerid].inventory.isFreeSpace(1)) {
        return msg(playerid, "inventory.space.notenough", CL_THUNDERBIRD);
    }

    local skin = getSkinBySkinId(skinid);

    if (!canMoneyBeSubstracted(playerid, skin.price)) {
        //triggerClientEvent(playerid, "hideCarShopGUI");
        return msg(playerid, "shops.clothesshop.money.error", CL_THUNDERBIRD);
    }

    local clothes = Item.Clothes();
    if (!players[playerid].inventory.isFreeWeight(clothes)) {
        return msg(playerid, "inventory.weight.notenough", CL_THUNDERBIRD);
    }
    // take money
    subMoneyToPlayer(playerid, skin.price);
    addMoneyToTreasury(skin.price);
    msg(playerid, "shops.clothesshop.success", CL_SUCCESS);
    clothes.amount = skin.skinid;
    players[playerid].inventory.push( clothes );
    clothes.save();
    players[playerid].inventory.sync();

    //setPlayerModel(playerid, skin.skinid, true);
});



/**
 * Get car shop model by number id
 * @param  {Integer} modelid
 * @return {Table}
 */
function getSkinBySkinId(skinid) {
    foreach(idx, skin in clothesPrices) {
        if (skin.skinid == skinid.tointeger()) {
            return skin;
        }
    }

    return null;
}
